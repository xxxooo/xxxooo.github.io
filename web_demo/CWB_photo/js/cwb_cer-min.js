function CerX(a,b,c,d){function da(){W=m.offsetWidth,X=m.offsetHeight,L=U/W,Z&&($=Z/W),F>1?wa(1,10):H?Da():ya(1,10)}function ea(a){return"http://www.cwb.gov.tw/V7/observe/satellite/Data/s1p/s1p-"+h[a]+".jpg"}function fa(){E=Math.floor(48),p.innerHTML="",n.style.opacity=".1",n.style.transition="opacity 1.6s",n.style.opacity="";var a=w[E];U=a.naturalWidth,V=a.naturalHeight,L=U/W,ga(a),Ba(!1,1e3,33),setTimeout(function(){o.addEventListener("mousedown",la),o.addEventListener("touchstart",la),o.addEventListener("dblclick",qa),o.addEventListener("mousewheel",ra),o.addEventListener("DOMMouseScroll",sa),o.addEventListener("contextmenu",va),q.style.opacity=.2,q.className="blink",r.style.bottom="0",A=!0},600),setTimeout(function(){C=!0},3e3)}function ga(a){a.naturalWidth&&(t.width=a.naturalWidth,t.height=a.naturalHeight,u.drawImage(a,0,0))}function ha(){C&&(C=!1,setTimeout(function(){q.style.opacity=0,q.className=""},200))}function ia(){I&&clearTimeout(I)}function ja(a){O*O+P*P>a&&ia()}function ka(a,b){b&&(O=a.pageX-M,P=a.pageY-N),M=a.pageX,N=a.pageY}function la(a){if(A)if(O=0,P=0,B=!1,D=E+.5,null==a.touches)a.preventDefault(),ka(a,!1),I=setTimeout(qa,1400,a),document.addEventListener("mousemove",ma),document.addEventListener("mouseup",na),document.addEventListener("mouseout",na);else if(a.touches.length<=2){if(1==a.touches.length){var b=a.targetTouches[0];ka(b,!1),T=0,I=setTimeout(qa,1400,b)}else{var b=a.targetTouches[0],c=a.targetTouches[1],d=c.pageX-b.pageX,e=c.pageY-b.pageY;M=.5*(b.pageX+c.pageX),N=.5*(b.pageY+c.pageY),T=Math.sqrt(d*d+e*e),ia()}document.addEventListener("touchmove",ma),document.addEventListener("touchend",na),document.addEventListener("touchcancel",na)}else ia()}function ma(a){if(null==a.touches)ka(a,!0),ja(2),oa();else if(1==a.touches.length){a.preventDefault();var b=a.targetTouches[0];ka(b,!0),ja(12),oa()}else if(2==a.touches.length){a.preventDefault();var b=a.targetTouches[0],c=a.targetTouches[1],d=.5*(b.pageX+c.pageX),e=.5*(b.pageY+c.pageY),f=c.pageX-b.pageX,g=c.pageY-b.pageY;O=d-M,P=e-N,M=d,N=e,S=Math.sqrt(f*f+g*g),4*(S-T)*(S-T)>O*O+P*P?(G=F*(S/T),S>T?G>1.5*$&&(G=1.5*$):G<.96&&(G=.96),wa(G,1)):oa(),T=S}}function na(a){ia(),null==a.touches?(this.removeEventListener("mousemove",ma),this.removeEventListener("mouseup",na),this.removeEventListener("mouseout",na)):(this.removeEventListener("touchmove",ma),this.removeEventListener("touchend",na),this.removeEventListener("touchcancel",na)),1==F?H?Da():Math.abs(O)>9&&Math.abs(O)>Math.abs(P)?Ba(O<0,1e3,Math.abs(1200/O)):Math.abs(P)>9&&Math.abs(P)>Math.abs(O)&&(A=!1,Ba(P<0,Math.floor(36),10)):ua()}function oa(){F>1?xa():H?Da():P*P>3*O*O?(window.scrollBy(0,-P),N-=P):za()}function pa(a,b){var c=Math.floor(Math.floor(a/b)*b*(1+b)/b)*b;return c>$?$:c}function qa(a){ka(a,!1),F<$?wa(pa(F,.5),400):wa(1,800)}function ra(a){a.preventDefault(),A&&(ka(a,!1),ta(.002*a.wheelDelta))}function sa(a){a.preventDefault(),A&&(ka(a,!1),ta(.08*-a.detail))}function ta(a){ia(),J&&clearTimeout(J),S=a,T=Math.abs(a),T>1&&(T=1),S>0?(G=F*(1+T),G>1.5*$&&(G=1.5*$)):(G=F/(1+T),G<.96&&(G=.96)),wa(G,400*T),J=setTimeout(ua,400)}function ua(){F<1.12?wa(1,400):F>$&&wa($,400)}function va(){ia(),document.removeEventListener("mousemove",ma),document.removeEventListener("mouseup",na),document.removeEventListener("touchmove",ma),document.removeEventListener("touchend",na)}function wa(a,b,c){if(B=!1,H&&Da(),F!=a){if(A=!1,ha(),1==a)Q=0,R=0;else{var d=a/F,e=M-m.offsetLeft,f=N-m.offsetTop;Q=(e-n.offsetLeft)*d-e,R=(f-n.offsetTop)*d-f}ya(a,b),K=setTimeout(function(){n.style.transition=""},b),F=a,F<=1&&(p.innerHTML="",t.width!=U&&ga(w[E])),c||setTimeout(function(){A=!0},b)}}function xa(){O<0?Q+=64+4096/(O-64):Q-=64-4096/(O+64),P<0?R+=64+4096/(P-64):R-=64-4096/(P+64),ya(F)}function ya(a,b){var c=(a-1)*W,d=(a-1)*X;a>=1?(Q<0?Q=0:Q>c&&(Q=c),R<0?R=0:R>d&&(R=d)):(Q>0?Q=0:Q<c&&(Q=c),R>0?R=0:R<d&&(R=d)),b&&(K&&clearTimeout(K),n.style.transition="all "+.001*b+"s",n.style.width=Math.round(W*a)+"px",n.style.height=Math.round(X*a)+"px"),n.style.left=Math.round(-Q)+"px",n.style.top=Math.round(-R)+"px"}function za(){O<0?D-=1+6/(O-6):D+=1-6/(O+6),D>=g?D%=g:D<0&&(D=g+D%g),Aa(Math.floor(D))}function Aa(a){a!=E&&(E=a,w[a]&&w[a].complete&&u.drawImage(w[a],0,0),ha())}function Ba(a,b,c,d){B=!0,setTimeout(function(){a?(0==E&&(E=g),Aa(E-1)):(71==E&&(E=-1),Aa(E+1)),c=c<83?1.06*c:83,b>1?B&&Ba(a,b-1,c,d):(B=!1,d?Ca(d):A=!0)},Math.round(c))}function Ca(a){var b=document.createElement("div"),c=y[a],d=c.r,e=c.x,f=c.y,g=c.info,h=0;d<.05?d=.05:d>.2&&(d=.2);const i=Math.round(d*Y),j=Math.round(e*W),k=Math.round(f*X),l=(20*(1-L)*d+4*L-1)/3,o=W*(l-1),p=X*(l-1);var q=n.firstChild,r=q.cloneNode();ctx=r.getContext("2d"),n.appendChild(r),ctx.save(),ctx.beginPath(),ctx.arc(j*L,k*L,i*L,0,2*Math.PI),ctx.clip(),ctx.drawImage(q,0,0),ctx.restore(),ctx.lineWidth=4*L/l,ctx.strokeStyle="rgba(255,255,255,.5)",ctx.stroke(),q.style.cssText+="-webkit-filter:blur(8px) invert(15%);filter:blur(8px) invert(15%)",Q=o*e,R=p*f,e>.5?(h=l*(W-j-i),o-Q>h&&(Q=o)):(h=l*(j-i),Q>h&&(Q=h)),f>.5?(h=l*(X-k-i),p-R>h&&(R=p)):(h=l*(k-i),R>h&&(R=h)),ya(l,1600),b.className="eigenPtInfo",m.appendChild(b),b.innerHTML=g,b_high=f>.5?l*(k-i)-R:X+R-l*(k+i),h=b_high-b.offsetHeight-18,h<12?(f>.5?b.style.top="0":b.style.bottom="0",b.style.height=b_high-18+"px",b.style.overflowY="scroll"):f>.5?b.style.top=h+"px":b.style.bottom=h+"px",b.style.left=e*(W-b.offsetWidth)+"px",setTimeout(function(){A=!0},500)}function Da(){ya(1,600),n.childElementCount>1&&(n.lastChild.remove(),n.firstChild.style.cssText=k,H=0),m.childElementCount>4&&m.lastChild.remove(),r.style.bottom="0"}const e=!!("ontouchstart"in window),f=navigator.language,g=72,h=b,i='<svg viewBox="0 0 720 720"><circle fill="#FFF" cx="360" cy="360" r="360"/><g id="cqs2"><path id="cqs1" fill="#AAA" d="M253.93,381.21L116.92,518.23c10.81,16.57,23.47,32.28,38.02,46.83c91.03,91.03,227.53,108.87,336.4,53.56L253.93,381.21z"/><use xlink:href="#cqs1" transform="rotate(180,360,360)"/></g><use xlink:href="#cqs2" transform="rotate(90,360,360)"/><circle cx="360" cy="360" r="340" fill="none" stroke="#AAA" stroke-width="40"/></svg>',j='<svg viewBox="0 0 96 96"><circle cx="48" cy="48" fill="#888"><animate attributeName="r" from="6" to="48" dur="1.5s" repeatCount="indefinite"/><animate attributeName="opacity" from=".8" to="0" dur="1.5s" repeatCount="indefinite"/></circle></svg>',k="position:absolute;width:100%;height:100%;",l=e?["左右滑動調整時間","Swipe for changing time"]:["拖曳進行以調整時間","Drag for changing time"];var m=document.getElementById(a);m.style.cssText="position:relative;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;max-width:800px;text-align:center;font:18px Helvetica,STHeiti,sans-serif;";var C,I,J,K,L,M,N,O,P,Q,R,S,T,Z,n=document.createElement("div"),o=document.createElement("div"),p=document.createElement("div"),q=document.createElement("p"),r=document.createElement("div"),s=document.createElement("a"),t=document.createElement("canvas"),u=t.getContext("2d"),v=document.createElement("style"),w=new Array(g),y=(new Array(g),[0]),z=[],A=!1,B=!1,D=0,E=0,F=1,G=1,H=0,U=0,V=0,W=m.offsetWidth,X=m.offsetHeight,Y=Math.max(W,X),$=2;m.appendChild(o),o.appendChild(p),o.appendChild(q),m.appendChild(r),m.appendChild(n),n.appendChild(t),p.style.top=.5*X-48+"px",p.innerHTML=j,q.innerHTML=0==f.indexOf("zh")?l[0]:l[1],n.style.cssText=k+"left:0;top:0;text-align:left;opacity:.35",t.style.cssText=k,r.style.bottom="-44px",r.className="dashPod",o.className="ctrLayer",v.innerHTML=".ctrLayer{position:absolute;top:0;width:100%;height:100%;z-index:2;cursor:grab;cursor:-moz-grab;cursor:-webkit-grab}.ctrLayer:active{cursor:grabbing;cursor:-moz-grabbing;cursor:-webkit-grabbing}.ctrLayer>div{position:relative;width:96px;height:96px;margin:auto;pointer-events:none}.ctrLayer p{position:absolute;top:0;width:100%;margin:0;padding:8px 0;opacity:0;background:#FFF;font-size:16px;transition:opacity 1s}.blink{animation:blink 4s infinite ease-in 1s;-webkit-animation:blink 4s infinite ease-in 1s}@keyframes blink{0%{opacity:.2}50%{opacity:.6}100%{opacity:.2}}@-webkit-keyframes blink{0%{opacity:.2}50%{opacity:.6}100%{opacity:.2}}.dashPod{position:absolute;width:100%;height:40px;opacity:.4;z-index:3;pointer-events:none;transition:bottom .6s}.dashPod:hover{opacity:.7}.dashPod>div{pointer-events:auto;cursor:pointer;float:left}.dashPod>div:first-child{margin-left:8px}.dashPod>div>p{width:10px;height:10px;background:rgba(128,128,128,.2);border-radius:50%;border:2px solid #FFF;box-shadow:0 2px 5px #999;margin:13px}.dashPod>div:hover>p{background:#FFF}.dashPod>a{pointer-events:auto;position:absolute;right:6px;width:36px;height:36px}.eigenPtInfo{position:absolute;box-sizing:border-box;border-radius:12px;max-width:70%;z-index:5;padding:10px;color:#222;text-shadow:0 1px 7px #FFF;background:rgba(255,255,255,.5)}",document.head.appendChild(v);var aa=63;img1=new Image,img1.src=ea(aa),img1.onload=function(){ga(img1)},c.length>5&&(c=c.slice(0,5)),y=y.concat(c);const ba=y.length-1;if(ba>0)for(var ca=0;ca<ba;ca++)z[ca]=document.createElement("div"),z[ca].id=ca+1,z[ca].appendChild(document.createElement("p")),r.appendChild(z[ca]),z[ca].onclick=function(){m.focusPoint(this.id)};return d&&(s.innerHTML=i,s.href=d,s.setAttribute("target","_blank"),r.appendChild(s)),window.addEventListener("resize",da),m.run=function(){function e(e,f){for(;b[e]!=c[e];b[e]+=2)w[b[e]]=new Image,w[b[e]].src=ea(b[e]),w[b[e]].onload=function(){a[e]++,a[e]==d[e]&&f()}}var a=[0,0,0,0,0,0],b=[48,0,18,55,1,19],c=[g,18,48,73,19,55],d=[9,8,13,7,7,16];e(0,function(){e(1,function(){fa(),setTimeout(function(){e(2,function(){e(3,function(){e(4,function(){e(5,function(){U||fa()})})})})},800)})})},m.focusPoint=function(a){B=!1,A=!1,r.style.bottom="-44px";const b=y[a].n-1,c=F-1;setTimeout(function(){if(wa(1,400*c,!0),b==E)setTimeout(function(){Ca(a)},408*c);else{var d=b-E;2*Math.abs(d)>g&&(d=d<0?d+g:d-g);var e=Math.abs(d),f=400*c-72*e-72;f<0&&(f=0),setTimeout(function(){Ba(d<0,e,64-2*e,a)},f)}H=a},104)},m}