function Oview(e){function q(){if(g)clearTimeout(g)}function R(e){if(g){if(E*E+S*S>e)clearTimeout(g)}}function U(e){if(p){E=0;S=0;if(e.touches==null){e.preventDefault();if(n){i.pause()}else{F=false;D=P+.5}b=e.pageX;w=e.pageY;document.addEventListener("mousemove",z);document.addEventListener("mouseup",W);g=setTimeout(function(){V()},777);o.style.cursor="move"}else if(e.touches.length==1){if(n){i.pause()}else{F=false;D=P+.5}var t=e.targetTouches[0];b=t.pageX;w=t.pageY;document.addEventListener("touchmove",z);document.addEventListener("touchend",W);g=setTimeout(function(){V()},777)}else{q()}if(m)clearTimeout(m)}else{i.play()}}function z(e){if(e.touches==null){E=e.pageX-b;S=e.pageY-w;b=e.pageX;w=e.pageY;R(1);if(d){$()}else if(v){pt()}else if(n){K()}else{J()}}else if(e.touches.length==1){e.preventDefault();var t=e.targetTouches[0];E=t.pageX-b;S=t.pageY-w;b=t.pageX;w=t.pageY;R(8);if(d){$()}else if(v){pt()}else if(n){K()}else{J()}}}function W(e){q();if(e.touches==null){this.removeEventListener("mousemove",z);this.removeEventListener("mouseup",W);if(!d){if(v){pt()}else if(n){Y()}else{G()}}o.style.cursor="pointer"}else{this.removeEventListener("touchmove",z);this.removeEventListener("touchend",W);if(!d){if(v){pt()}else if(n){Y()}else{G()}}}}function X(){q();document.removeEventListener("mousemove",z);document.removeEventListener("mouseup",W);document.removeEventListener("touchmove",z);document.removeEventListener("touchend",W)}function V(){d=!d;if(d){if(v)pt();s.style.transition="width .5s, height .5s, left .5s, top .5s";x=Math.round(A*(r.offsetLeft-b)/k);T=Math.round(O*(r.offsetTop-w)/L);s.style.width=N+"px";s.style.height=C+"px";s.style.left=x+"px";s.style.top=T+"px";setTimeout(function(){s.style.transition=""},600)}else{s.style.transition="width .5s, height .5s, left .5s, top .5s";s.style.width=k+"px";s.style.height=L+"px";s.style.left="0";s.style.top="0";setTimeout(function(){s.style.transition=""},600)}}function $(){if(E<0){x-=64+4096/(E-64)}else{x+=64-4096/(E+64)}if(S<0){T-=64+4096/(S-64)}else{T+=64-4096/(S+64)}if(x>0){x=0}else if(x+A<0){x=-A}if(T>0){T=0}else if(T+O<0){T=-O}s.style.left=Math.round(x)+"px";s.style.top=Math.round(T)+"px"}function J(){if(E>=0){D+=1-10/(E+10)}else{D-=1+10/(E-10)}if(D>=H){D=D%H}else if(D<0){D=H+D%H}Q(Math.floor(D))}function K(){M=E*.25;if(M>2){M=2}else if(M<-2){M=-2}i.playbackRate=i.duration<1?2:M.toPrecision(2);if(i.paused)i.play()}function Q(e){if(e!=P){if(I[e]!=null){s.replaceChild(I[e],s.firstChild)}P=e}}function G(){if(Math.abs(E)>9&&Math.abs(E)>Math.abs(S)){Z(1200/E)}else if(Math.abs(S)>9&&Math.abs(S)>Math.abs(E)){nt(S>0,28,Math.floor(.5*H),false)}else{F=false}}function Y(){if(Math.abs(E)>9&&Math.abs(E)>Math.abs(S)){var e=E>0?-1:1;for(var t=0;t<10;t++){setTimeout(function(){i.playbackRate+=.1*e},100)}}else if(Math.abs(S)>9&&Math.abs(S)>Math.abs(E)){i.currentTime=(i.currentTime+.5*_)%_;i.pause()}else{i.pause()}}function Z(e){F=true;tt(e<0,Math.abs(e));m=setTimeout(function(){F=false},5e4)}function et(){m=setTimeout(function(){i.pause()},5e4)}function tt(e,t){setTimeout(function(){if(e){if(P==0)P=H;Q(P-1)}else{if(P==H-1)P=-1;Q(P+1)}if(F){t=t<99?t*1.09:99;tt(e,t)}},Math.round(t))}function nt(e,t,n,r){if(n>0){setTimeout(function(){if(e){if(P==0)P=H;Q(P-1)}else{if(P==H-1)P=-1;Q(P+1)}nt(e,t,n-1,r)},Math.round(t))}else{if(r)ht(r[0],r[1],r[2],r[3])}}function rt(){a.style.opacity="0";u.style.width="2%";l.spin(o);this.removeEventListener("play",rt);this.addEventListener("play",lt);this.addEventListener("pause",ct);this.addEventListener("canplaythrough",ft);this.addEventListener("playing",it)}function it(){function t(){if(i.currentTime>.1*j+.02){st();j+=1;u.style.width=j<B?98*j/B+2+"%":"100%"}if(j>=H||e>2){if(!p)s();window.removeEventListener("focus",ut);window.removeEventListener("blur",at);setTimeout(function(){i.remove()},108);clearInterval(y);Z(99)}else if(j>=B){s()}else if(i.ended){i.play();e++}}function r(){if(i.currentTime>_*.85||i.ended){s();clearInterval(y);i.setAttribute("loop","");i.play()}else{u.style.width=98*i.currentTime/(_*.85)+2+"%"}}function s(){p=true;u.style.width="100%";u.style.opacity=0;setTimeout(function(){u.remove()},2e3);this.removeEventListener("canplaythrough",ft);this.removeEventListener("play",lt);this.removeEventListener("pause",ct);f.style.bottom="0";a.remove();l.stop();delete l}this.removeEventListener("playing",it);N=k*2;C=L*2;if(this.videoWidth>N)N=this.videoWidth;if(this.videoHeight>C)C=this.videoHeight;A=N-k;O=C-L;if(n){_=i.duration;y=setInterval(function(){r()},20)}else{st();window.addEventListener("focus",ut);window.addEventListener("blur",at);if(this.duration>.1){H=Math.round(this.duration*10);if(H>80)H=80;B=Math.round(H*.85)}var e=0;y=setInterval(function(){t()},20)}}function ot(){var e=setInterval(function(){if(i.playbackRate<0){if(i.currentTime<.1){i.pause();i.currentTime=_-.05;i.play()}}if(i.paused)clearInterval(e)},20)}function ut(){i.play()}function at(){i.pause()}function ft(){i.play();l.stop()}function lt(){a.style.opacity="0"}function ct(){if(this.readyState==4){a.style.opacity="1"}else{l.spin(o)}}function ht(e,t,r,i){f.style.bottom="-50px";if(r<.05){r=.05}else if(r>.2){r=.2}var o=k>L?Math.round(r*k):Math.round(r*L),u=Math.round(e*k),a=Math.round(t*L);if(n){var l=document.createElement("div"),c=document.createElement("div"),h=document.createElement("canvas"),d=h.getContext("2d");h.width=k;h.height=L;h.style.position="absolute";s.appendChild(l);l.appendChild(h);l.appendChild(c);d.beginPath();d.rect(0,0,k,L);d.arc(u,a,o,0,2*Math.PI,true);d.closePath();d.clip();d.fillStyle="rgba(160,160,160,0.5)";d.fill();d.beginPath();d.arc(u,a,o+2,0,2*Math.PI,true);d.closePath();d.lineWidth=4;d.strokeStyle="rgba(255,255,255,0.5)";d.stroke();l.style.cssText="width:inherit;height:inherit;";c.innerHTML=i;c.style.cssText="position:absolute;width:100%;box-sizing:border-box;z-index:3;padding:15px;background:rgba(255,255,255,.4);color:#444;font-size:18px;font-family:Helvetica,STHeiti,微軟正黑體,Microsoft JhengHei;text-align:center;text-shadow:1px 2px 8px #FFF;";if(t>.5){c.style.top="0"}else{c.style.bottom="0";b_high=L-t*L-r*k;if(c.offsetHeight>b_high+16){c.style.height=b_high+4+"px";c.style.overflowY="scroll"}else if(c.offsetHeight>L*.44){c.style.height=L*.4+"px";c.style.overflowY="scroll"}}}else{var v=N/k,m=s.firstChild;l=document.createElement("div"),c1=document.createElement("div"),c=document.createElement("div"),h=m.cloneNode(),d=h.getContext("2d");s.appendChild(l);l.appendChild(c1);l.appendChild(c);l.appendChild(h);d.beginPath();d.arc(u*v,a*v,o*v,0,2*Math.PI,true);d.closePath();d.clip();d.drawImage(m,0,0);c.innerHTML=i;m.style.cssText+="-webkit-filter:blur(8px) brightness(85%);";l.style.cssText="width:inherit;height:inherit;";c1.style.cssText="background:rgba(255,255,255,.5);position:absolute;border-radius:50%;";c1.style.width=2*o+8+"px";c1.style.height=2*o+8+"px";c1.style.left=u-o-4+"px";c1.style.top=a-o-4+"px";c.style.cssText='position:absolute;width:100%;box-sizing:border-box;z-index:3;padding:15px;background:rgba(255,255,255,.4);color:#303030;font-size:18px;font-family:Helvetica,"STHeiti";text-align:center;text-shadow:1px 2px 8px #FFF;';if(t>.5){c.style.top="0"}else{c.style.bottom="0";b_high=L-t*L-r*k;if(c.offsetHeight>b_high+16){c.style.height=b_high+4+"px";c.style.overflowY="scroll"}else if(c.offsetHeight>L*.44){c.style.height=L*.4+"px";c.style.overflowY="scroll"}}}p=true}function pt(){if(s.childElementCount>1){s.lastChild.remove();s.firstChild.style.cssText="position:absolute;width:inherit;height:inherit;";v=0}f.style.bottom="0"}var t=navigator.platform,n=t=="iPad"||t=="iPhone"||t=="iPod",r=document.getElementById(e),i=document.createElement("video"),s=document.createElement("div"),o=document.createElement("div"),u=document.createElement("div"),a=document.createElement("div"),f=document.createElement("div"),l=new Spinner,c=[0],h=[],p=false,d=false,v=0,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O;if(n){var M=0,_=4.8}else{var D=0,P=0,H=48,B=41,j=0,F=false,I=new Array(48)}r.appendChild(o);o.appendChild(u);o.appendChild(a);r.appendChild(f);r.appendChild(s);if(!n)s.appendChild(document.createElement("div"));s.appendChild(i);r.set=function(e,t,l){i.setAttribute("src",e);i.setAttribute("poster",t);i.setAttribute("preload","auto");k=r.offsetWidth;L=r.offsetHeight;r.style.cssText="position:relative;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none";u.style.cssText="position:absolute;bottom:0;background:#ff7600;width:0;height:6px;z-index:5;opacity:.5;transition:width .3s, opacity 2s";a.style.top=.5*(L-80)+"px";s.style.position="relative";s.style.width=k+"px";s.style.height=L+"px";s.style.left="0";s.style.top="0";i.style.cssText="position:absolute;width:inherit;height:inherit";f.style.cssText="position:absolute;bottom:-50px;z-index:3;transition:bottom .5s";var p=document.createElement("style");p.innerHTML='.turnBtn0{display:block;background:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240"><circle opacity=".5" cx="120" cy="120" r="120"/><path fill="white" d="M163.7,144.7C153.6,172.3,127.1,192,96,192c-39.8,0-72-32.2-72-72c0,53,43,96,96,96s96-43,96-96c0-17.7-14.3-32-32-32s-32,14.3-32,32C152,129.9,156.5,138.8,163.7,144.7"/><path fill="white" d="M76.3,95.3C86.4,67.7,112.9,48,144,48c39.8,0,72,32.2,72,72c0-53-43-96-96-96s-96,43-96,96c0,17.7,14.3,32,32,32s32-14.3,32-32C88,110.1,83.5,101.2,76.3,95.3"/></svg>\') no-repeat;background-size:cover}.tBtn00{position:relative;width:80px;height:80px;margin:auto;z-index:5;pointer-events:none;opacity:.8}.tBtn01{width:40px;height:40px;margin:2px 12px 6px 8px;float:left;opacity:.2}.tBtn01:hover{opacity:.5}.eigenBtn{width:10px;height:10px;background:rgba(160,160,160,.2);border-radius:50%;border: 2px solid #FFF;box-shadow:1px 1px 6px #AAA;margin:15px;float:left;opacity:.8}.eigenBtn:hover{opacity:1;background: #FFF}.ctrLayer {width:inherit;height:inherit;position:absolute;z-index:2;cursor:pointer}.ctrLayer:hover .tBtn00{opacity:1}';document.head.appendChild(p);o.className="ctrLayer";a.className="turnBtn0 tBtn00";var d=document.createElement("div");d.className="turnBtn0 tBtn01";f.appendChild(d);d.onclick=function(){if(n){if(i.paused){i.playbackRate=1;i.play()}else{i.pause()}}else{if(F){F=false}else{Z(99)}}};if(l.length>5)l=l.slice(0,5);c=c.concat(l);var v=c.length-1;if(v>0){for(var m=0;m<v;m++){h[m]=document.createElement("div");h[m].id=m+1;h[m].className="eigenBtn";f.appendChild(h[m]);h[m].onclick=function(){r.focusPoint(this.id)}}}};r.run=function(){o.addEventListener("mousedown",U);o.addEventListener("touchstart",U);o.addEventListener("dblclick",function(){if(p)V()});o.addEventListener("contextmenu",X);i.addEventListener("play",rt)};var st=function(){var e=document.createElement("canvas");e.width=N;e.height=C;e.style.cssText="position:absolute;width:inherit;height:inherit;";e.setAttribute("serial",j);s.replaceChild(e,s.firstChild);e.getContext("2d").drawImage(i,0,0,N,C);I[j]=e};r.focusPoint=function(e){if(p){if(n){i.pause()}else{F=false}if(d){V()}if(v!=e){p=false;if(v)pt();var t=c[e],r=t["n"],s=t["x"],o=t["y"],u=t["r"],a=t["info"];setTimeout(function(){if(r==P){ht(s,o,u,a)}else{if(n){i.currentTime=.1*r;ht(s,o,u,a)}else{var t=r-P;if(Math.abs(t)*2>H){t=t<0?t+H:t-H}nt(t<0,28,Math.abs(t),[s,o,u,a])}}v=e},104)}}};return r}(function(e,t){if(typeof exports=="object")module.exports=t();else if(typeof define=="function"&&define.amd)define(t);else e.Spinner=t()})(this,function(){"use strict";function r(e,t){var n=document.createElement(e||"div"),r;for(r in t)n[r]=t[r];return n}function i(e){for(var t=1,n=arguments.length;t<n;t++)e.appendChild(arguments[t]);return e}function o(e,r,i,o){var u=["opacity",r,~~(e*100),i,o].join("-"),a=.01+i/o*100,f=Math.max(1-(1-e)/r*(100-a),e),l=n.substring(0,n.indexOf("Animation")).toLowerCase(),c=l&&"-"+l+"-"||"";if(!t[u]){s.insertRule("@"+c+"keyframes "+u+"{"+"0%{opacity:"+f+"}"+a+"%{opacity:"+e+"}"+(a+.01)+"%{opacity:1}"+(a+r)%100+"%{opacity:"+e+"}"+"100%{opacity:"+f+"}"+"}",s.cssRules.length);t[u]=1}return u}function u(t,n){var r=t.style,i,s;n=n.charAt(0).toUpperCase()+n.slice(1);for(s=0;s<e.length;s++){i=e[s]+n;if(r[i]!==undefined)return i}if(r[n]!==undefined)return n}function a(e,t){for(var n in t)e.style[u(e,n)||n]=t[n];return e}function f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)if(e[r]===undefined)e[r]=n[r]}return e}function l(e){var t={x:e.offsetLeft,y:e.offsetTop};while(e=e.offsetParent)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function c(e,t){return typeof e=="string"?e:e[t%e.length]}function p(e){this.opts=f(e||{},p.defaults,h)}function d(){function e(e,t){return r("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}s.addRule(".spin-vml","behavior:url(#default#VML)");p.prototype.lines=function(t,n){function o(){return a(e("group",{coordsize:s+" "+s,coordorigin:-r+" "+ -r}),{width:s,height:s})}function h(t,s,u){i(f,i(a(o(),{rotation:360/n.lines*t+"deg",left:~~s}),i(a(e("roundrect",{arcsize:n.corners}),{width:r,height:n.width,left:n.radius,top:-n.width>>1,filter:u}),e("fill",{color:c(n.color,t),opacity:n.opacity}),e("stroke",{opacity:0}))))}var r=n.length+n.width,s=2*r;var u=-(n.width+n.length)*2+"px",f=a(o(),{position:"absolute",top:u,left:u}),l;if(n.shadow)for(l=1;l<=n.lines;l++)h(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=n.lines;l++)h(l);return i(t,f)};p.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0;if(i&&t+r<i.childNodes.length){i=i.childNodes[t+r];i=i&&i.firstChild;i=i&&i.firstChild;if(i)i.opacity=n}}}var e=["webkit","Moz","ms","O"],t={},n;var s=function(){var e=r("style",{type:"text/css"});i(document.getElementsByTagName("head")[0],e);return e.sheet||e.styleSheet}();var h={lines:12,length:0,width:8,radius:24,rotate:0,corners:1,color:"#FFF",direction:-1,speed:1,trail:50,opacity:.5,shadow:true,fps:20,zIndex:4,className:"spinner",top:"50%",left:"50%",position:"absolute"};p.defaults={};f(p.prototype,{spin:function(e){this.stop();var t=this,i=t.opts,s=t.el=a(r(0,{className:i.className}),{position:i.position,width:0,zIndex:i.zIndex}),o=i.radius+i.length+i.width;a(s,{left:i.left,top:i.top});if(e){e.insertBefore(s,e.firstChild||null)}s.setAttribute("role","progressbar");t.lines(s,t.opts);if(!n){var u=0,f=(i.lines-1)*(1-i.direction)/2,l,c=i.fps,h=c/i.speed,p=(1-i.opacity)/(h*i.trail/100),d=h/i.lines;(function v(){u++;for(var e=0;e<i.lines;e++){l=Math.max(1-(u+(i.lines-e)*d)%h*p,i.opacity);t.opacity(s,e*i.direction+f,l,i)}t.timeout=t.el&&setTimeout(v,~~(1e3/c))})()}return t},stop:function(){var e=this.el;if(e){clearTimeout(this.timeout);if(e.parentNode)e.parentNode.removeChild(e);this.el=undefined}return this},lines:function(e,t){function l(e,n){return a(r(),{position:"absolute",width:t.length+t.width+"px",height:t.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*s+t.rotate)+"deg) translate("+t.radius+"px"+",0)",borderRadius:(t.corners*t.width>>1)+"px"})}var s=0,u=(t.lines-1)*(1-t.direction)/2,f;for(;s<t.lines;s++){f=a(r(),{position:"absolute",top:1+~(t.width/2)+"px",transform:t.hwaccel?"translate3d(0,0,0)":"",opacity:t.opacity,animation:n&&o(t.opacity,t.trail,u+s*t.direction,t.lines)+" "+1/t.speed+"s linear infinite"});if(t.shadow)i(f,a(l("#000","0 0 4px "+"#000"),{top:2+"px"}));i(e,i(f,l(c(t.color,s),"0 0 1px rgba(0,0,0,.1)")))}return e},opacity:function(e,t,n){if(t<e.childNodes.length)e.childNodes[t].style.opacity=n}});var v=a(r("group"),{behavior:"url(#default#VML)"});if(!u(v,"transform")&&v.adj)d();else n=u(v,"animation");return p})